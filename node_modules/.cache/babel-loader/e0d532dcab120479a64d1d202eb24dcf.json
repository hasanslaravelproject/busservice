{"ast":null,"code":"import axios from 'axios';\nimport history from \"../history\";\nconst apiUrl = 'http://localhost:8000/api/auth'; //your api base url\n\nconst proxyurl = \"https://thingproxy.freeboard.io/fetch/\"; //proxy for local testing, remove this in production version\n\nfunction getHeader() {\n  const token = localStorage.getItem(\"token\");\n  const expiration = localStorage.getItem(\"token_exp\");\n\n  if (expiration * 1000 < Date.now()) {\n    history.push(\"/\");\n    return {\n      \"Content-Type\": \"application/json\"\n    };\n  }\n\n  if (token) {\n    return {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\",\n      useCredentials: true\n    };\n  } else {\n    return {\n      \"Content-Type\": \"application/json\"\n    };\n  }\n}\n\nconst api = axios.create({\n  baseURL: apiUrl,\n  headers: getHeader()\n});\nexport default api;","map":{"version":3,"sources":["C:/xampp/htdocs/projectbus/ReactApp/src/api/axios.js"],"names":["axios","history","apiUrl","proxyurl","getHeader","token","localStorage","getItem","expiration","Date","now","push","Authorization","useCredentials","api","create","baseURL","headers"],"mappings":"AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,MAAMC,MAAM,GAAG,gCAAf,C,CAAiD;;AACjD,MAAMC,QAAQ,GAAG,wCAAjB,C,CAA2D;;AAC3D,SAASC,SAAT,GAAqB;AACjB,QAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,QAAMC,UAAU,GAAGF,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAnB;;AACA,MAAIC,UAAU,GAAG,IAAb,GAAoBC,IAAI,CAACC,GAAL,EAAxB,EAAoC;AAChCT,IAAAA,OAAO,CAACU,IAAR,CAAa,GAAb;AACA,WAAO;AACH,sBAAgB;AADb,KAAP;AAGH;;AACD,MAAIN,KAAJ,EAAW;AACP,WAAO;AACHO,MAAAA,aAAa,EAAG,UAASP,KAAM,EAD5B;AAEH,sBAAgB,kBAFb;AAGHQ,MAAAA,cAAc,EAAE;AAHb,KAAP;AAKH,GAND,MAMO;AACH,WAAO;AACH,sBAAgB;AADb,KAAP;AAGH;AACJ;;AACD,MAAMC,GAAG,GAAGd,KAAK,CAACe,MAAN,CAAa;AACrBC,EAAAA,OAAO,EAAEd,MADY;AAErBe,EAAAA,OAAO,EAAEb,SAAS;AAFG,CAAb,CAAZ;AAOA,eAAeU,GAAf","sourcesContent":["\r\nimport axios from 'axios';\r\nimport history from \"../history\";\r\nconst apiUrl = 'http://localhost:8000/api/auth'; //your api base url\r\nconst proxyurl = \"https://thingproxy.freeboard.io/fetch/\"; //proxy for local testing, remove this in production version\r\nfunction getHeader() {\r\n    const token = localStorage.getItem(\"token\");\r\n    const expiration = localStorage.getItem(\"token_exp\");\r\n    if (expiration * 1000 < Date.now()) {\r\n        history.push(\"/\");\r\n        return {\r\n            \"Content-Type\": \"application/json\",\r\n        };\r\n    }\r\n    if (token) {\r\n        return {\r\n            Authorization: `Bearer ${token}`,\r\n            \"Content-Type\": \"application/json\",\r\n            useCredentials: true,\r\n        };\r\n    } else {\r\n        return {\r\n            \"Content-Type\": \"application/json\",\r\n        };\r\n    }\r\n}\r\nconst api = axios.create({\r\n    baseURL: apiUrl,\r\n    headers: getHeader(),\r\n})\r\n\r\n\r\n\r\nexport default api;\r\n  "]},"metadata":{},"sourceType":"module"}